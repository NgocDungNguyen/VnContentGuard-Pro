# VnContentGuard Configuration File
# Last Updated: January 15, 2026

# ============================================================================
# API Configuration
# ============================================================================
api:
  gemini_api_key_env_var: "GEMINI_API_KEY"  # Name of env variable to read API key from
  gemini_model: "gemini-2.5-flash"  # Primary model to use
  gemini_fallback_models:
    - "gemini-1.5-flash"
    - "gemini-pro"
  
  # Timeout settings (in seconds)
  timeout_api_call: 30
  timeout_crawler: 10
  timeout_playwright: 60

# ============================================================================
# Toxicity Analysis Settings
# ============================================================================
toxicity:
  # Safety settings for Gemini
  safety_settings:
    - category: "HARM_CATEGORY_HARASSMENT"
      threshold: "BLOCK_LOW_AND_ABOVE"
    - category: "HARM_CATEGORY_HATE_SPEECH"
      threshold: "BLOCK_LOW_AND_ABOVE"
    - category: "HARM_CATEGORY_SEXUALLY_EXPLICIT"
      threshold: "BLOCK_LOW_AND_ABOVE"
    - category: "HARM_CATEGORY_DANGEROUS_CONTENT"
      threshold: "BLOCK_LOW_AND_ABOVE"
  
  # Thresholds for toxicity scoring
  confidence_threshold: 0.7  # Score >= this is flagged as toxic
  
  # Comment validation
  min_comment_length: 3
  max_comment_length: 5000

  # Regex pattern categories for quick detection
  pattern_categories:
    - Violence
    - Self-Harm
    - Regional Discrimination
    - Racism
    - Sexual Harassment
    - Profanity
    - Spam/Scam

# ============================================================================
# Crawler Configuration
# ============================================================================
crawlers:
  # User-Agent rotation pool
  user_agents:
    - "Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/91.0.4472.124 Safari/537.36"
    - "Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/92.0.4515.159 Safari/537.36"
    - "Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/93.0.4577.82 Safari/537.36"
    - "Mozilla/5.0 (Windows NT 10.0; Win64; x64; rv:90.0) Gecko/20100101 Firefox/90.0"
    - "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/91.0.4472.124 Safari/537.36"

  # Site-specific configuration
  news_sites:
    vnexpress.net:
      title_selectors: ["h1.title", "h1", ".fck_heading1"]
      content_selectors: ["article", ".fck_content", ".content_detail"]
      date_selectors: [".date", ".published-date", "time"]
      ads_to_remove: [".ad", ".adv", ".advertisement"]
    
    dantri.com.vn:
      title_selectors: ["h1.title", "h1", ".news-title"]
      content_selectors: [".news-content", "article", ".ArticleContent"]
      date_selectors: [".date", ".publish-date"]
      ads_to_remove: [".ad", ".ads", ".banner"]
    
    tuoitre.vn:
      title_selectors: ["h1", "h1.title"]
      content_selectors: [".fck_detail_content", ".detail-content"]
      date_selectors: [".date", ".publish-date"]
      ads_to_remove: [".ad-container", ".ads"]

  # Social media crawling
  social_crawler:
    headless_browser: true
    scroll_iterations: 5
    scroll_distance: 3000
    scroll_wait_time: 1.5
    
    # Comment selectors for different platforms
    selectors:
      generic: [".comment_content", ".comment-text", "div[data-component='comment']"]
      vnexpress: [".full_content", ".content_more"]
      facebook: ["div[role='article']"]

# ============================================================================
# Text Cleaning Configuration
# ============================================================================
text_cleaning:
  # Remove emojis
  remove_emojis: true
  
  # Normalize Vietnamese accents
  normalize_accents: true
  
  # Teen code mapping (Vietnamese slang)
  teen_code_enabled: true
  
  # Remove URLs
  remove_urls: true
  
  # Remove email addresses
  remove_emails: true
  
  # Remove excessive punctuation
  remove_excessive_punctuation: true
  
  # Maximum text length for processing
  max_text_length: 10000

# ============================================================================
# Logging Configuration
# ============================================================================
logging:
  log_directory: "logs"
  
  # Error log settings
  error_log:
    filename: "error.log"
    level: "ERROR"
    format: "%(asctime)s | %(levelname)s | %(message)s"
  
  # History/Scan log settings
  history_log:
    filename: "history.log"
    level: "INFO"
    format: "%(asctime)s | %(message)s"
  
  # Date format
  date_format: "%Y-%m-%d %H:%M:%S"
  
  # Log retention (days, 0 = keep all)
  retention_days: 30

# ============================================================================
# Sentiment Analysis Configuration
# ============================================================================
sentiment:
  # Local model for sentiment analysis
  model_name: "wonrax/phobert-base-vietnamese-sentiment"
  
  # Max text length before truncation (for performance)
  max_text_length: 256
  
  # Model device
  device: "cpu"  # or "cuda" if GPU available

# ============================================================================
# Fake News Detection Configuration
# ============================================================================
fake_news:
  # Risk score thresholds
  thresholds:
    safe: 3
    suspicious: 6
    likely_fake: 8
  
  # Context date for Gemini
  context_date: "January 15, 2026"
  
  # Analysis focus areas
  check_dates: true
  check_sources: true
  check_contradictions: true
  check_deepfakes: true

# ============================================================================
# UI Configuration (Streamlit)
# ============================================================================
ui:
  page_title: "VnContentGuard Pro"
  page_icon: "üõ°Ô∏è"
  layout: "wide"
  
  # Color coding for results
  colors:
    clean: "#28a745"      # Green
    suspicious: "#ffc107" # Yellow
    toxic: "#dc3545"      # Red
  
  # Display settings
  max_comments_display: 100
  max_title_length: 100
